(()=>{var t={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},d:(o,n)=>{for(var a in n)t.o(n,a)&&!t.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:n[a]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o),t.d(o,{extend:()=>l});const n=flarum.reg.get("core","common/app");t.n(n)().initializers.add("ghostchu-openai-content-audit-common",()=>{console.log("[ghostchu/openai-content-audit] Hello, forum and admin!")});const a=flarum.reg.get("core","forum/app");var r=t.n(a);const e=flarum.reg.get("core","common/extend"),u=flarum.reg.get("core","forum/utils/UserControls");var i=t.n(u);const s=flarum.reg.get("core","forum/utils/PostControls");var c=t.n(s);const d=flarum.reg.get("core","common/components/Button");var m=t.n(d);const l=[];r().initializers.add("ghostchu-openai-content-audit",()=>{function t(t,o,n){r().alerts.clear(),r().request({method:"POST",url:r().forum.attribute("apiUrl")+"/manual-audit",body:{contentType:t,contentId:o,fields:n}}).then(()=>{r().alerts.show({type:"success"},r().translator.trans("ghostchu-openai-content-audit.forum.audit_queued"))},t=>{r().alerts.show({type:"error"},r().translator.trans("ghostchu-openai-content-audit.forum.audit_failed")+": "+(t.message||t))})}console.log("[ghostchu/openai-content-audit] Hello, forum!"),(0,e.extend)(i(),"moderationControls",function(o,n){if(!r().session.user||!r().forum.attribute("canManualAudit"))return;o.add("audit-username",m().component({icon:"fas fa-robot",onclick:()=>{confirm(r().translator.trans("ghostchu-openai-content-audit.forum.confirm_audit_username"))&&t("user_profile_username",Number(n.id()),["username","display_name"])}},r().translator.trans("ghostchu-openai-content-audit.forum.audit_username"))),n.avatarUrl()&&o.add("audit-avatar",m().component({icon:"fas fa-robot",onclick:()=>{confirm(r().translator.trans("ghostchu-openai-content-audit.forum.confirm_audit_avatar"))&&t("user_profile_avatar",Number(n.id()),["avatar_url"])}},r().translator.trans("ghostchu-openai-content-audit.forum.audit_avatar")));const a=n.cover;a&&a()&&o.add("audit-cover",m().component({icon:"fas fa-robot",onclick:()=>{confirm(r().translator.trans("ghostchu-openai-content-audit.forum.confirm_audit_cover"))&&t("user_profile_cover",Number(n.id()),["cover"])}},r().translator.trans("ghostchu-openai-content-audit.forum.audit_cover")))}),(0,e.extend)(c(),"moderationControls",function(o,n){r().session.user&&r().forum.attribute("canManualAudit")&&o.add("audit-post",m().component({icon:"fas fa-robot",onclick:()=>{if(confirm(r().translator.trans("ghostchu-openai-content-audit.forum.confirm_audit_post"))){const o=1===n.number()?"discussion":"post";t(o,Number("discussion"===o?n.discussion().id():n.id()),[])}}},r().translator.trans("ghostchu-openai-content-audit.forum.audit_post")))})})})(),module.exports=o})();
//# sourceMappingURL=forum.js.map