(()=>{var t={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},d:(o,n)=>{for(var e in n)t.o(n,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o),t.d(o,{extend:()=>h});const n=flarum.core.compat["common/app"];t.n(n)().initializers.add("ghostchu-openai-content-audit-common",function(){console.log("[ghostchu/openai-content-audit] Hello, forum and admin!")});const e=flarum.core.compat["forum/app"];var r=t.n(e);const a=flarum.core.compat["common/extend"],i=flarum.core.compat["forum/components/Post"];var c=t.n(i);const u=flarum.core.compat["forum/components/NotificationGrid"];var s=t.n(u);function l(t,o){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},l(t,o)}function f(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,l(t,o)}const p=flarum.core.compat["forum/components/Notification"];var d=function(t){function o(){return t.apply(this,arguments)||this}f(o,t);var n=o.prototype;return n.icon=function(){return"fas fa-exclamation-triangle"},n.href=function(){return r().route("index")},n.content=function(){return r().translator.trans("ghostchu-openai-content-audit.forum.notifications.content_violation_text")},n.excerpt=function(){var t=this.attrs.notification.content();if(t){var o=t.conclusion||"",n=t.contentType||"",e=t.confidence?(100*parseFloat(t.confidence)).toFixed(1)+"%":"",a="";if(n){var i="ghostchu-openai-content-audit.email.content_type."+n,c=r().translator.trans(i);a+=("string"==typeof c&&c!==i?c:n)+": "}return o&&(a+=o),e&&(a+=" ("+e+")"),a.length>200?a.substring(0,200)+"...":a}return""},o}(t.n(p)());const g=flarum.core.compat["common/Model"];var y=function(t){function o(){return t.apply(this,arguments)||this}return f(o,t),o}(t.n(g)());const h=[].concat([]);r().initializers.add("ghostchu-openai-content-audit",function(){console.log("[ghostchu/openai-content-audit] Hello, forum!"),r().store.models["audit-logs"]=y,r().notificationComponents.contentViolation=d,(0,a.extend)(s().prototype,"notificationTypes",function(t){t.add("contentViolation",{name:"contentViolation",icon:"fas fa-exclamation-triangle",label:r().translator.trans("ghostchu-openai-content-audit.forum.settings.notify_content_violation_label")})}),(0,a.override)(c().prototype,"flagReason",function(t,o){if("openai-audit"===o.type()){var n=o.reason(),e=o.reasonDetail();return[n||r().translator.trans("ghostchu-openai-content-audit.forum.flag.default_reason"),e&&m("span",{className:"Post-flagged-detail"},e)]}return t(o)})})})(),module.exports=o})();
//# sourceMappingURL=forum.js.map